---
title:  3-Tier 구성 방법 #주제
excerpt: "Nick Pury." #닉네임
search: true
categories: 
  - Cloud #대분류
  - application #소분류
tags: 
  - 3 Tier #주요 핵심 단어
toc: true
comments: true

last_modified_at: 2019-10-04T00:03:00+09:00

## -- 블로그 글위에 이미지 추가
#header:
#  image: https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_1280.png

## -- 블로그 글위에 색상 추가
#xcerpt: "This post should display a **header with a solid background color**, if the theme #supports it."
#header:
#  overlay_color: "#333"

# -- 블로그 글위에 배경 추가 및 링크 추가
xcerpt: "This post should [...]"
header:
  overlay_image: /assets/images/hannah-rodrigo-mf_3yZnC6ug-unsplash.jpg
  overlay_filter: 0.5 # same as adding an opacity of 0.5 to a black background
  caption: "Photo credit: [**Unsplash**](https://unsplash.com)"
  actions:
    - label: "Download"
      url: "https://github.com"

---

## 3-Tier 구축

### 3-Tier?<br>
- 2-Tier 구조에서 보안과 서버 과부하 등 2-Tier 구조의 제한을 극복하기 위해서 3-Tier 아키텍처 등장<br>
- WEB -> WAS -> DB 구조로 각 계층별로 독립적으로 분리 시켜 놓은 구조

---

### 구성도

![srceenshot](/assets/images/3tier/45.png "width:300px;htight:100px")

---

### 구성 방법
구성 순서는 아래와 같습니다.<br>
1. WEB1번 서버 설치 (Apache 2.4.39 V)<br>
2. WAS1번 서버 설치(Tomcat 7.0.76 V)<br>
3. WEB1번 서버와 WAS1번 서버 연동<br>
4. AMI를 통한 WEB2, WAS2번 배포<br>
5. RDS 구축 (MYSQL 5.7.22 V)<br>

---

<h2>1. WEB 서버</h2>

- Amazon Linux 2 OS로 구성하였습니다.
- WEB 서버 접속 후 YUM을 통해 Apache를 설치합니다.
- Apache만을 단독으로 할 경우 더 이상 작업이 필요 없지만, 
WAS와 연동할 경우 추후 mod_jk 모듈과 빌드 하기 위해 httpd-devel 패키를 설치해줍니다.

httpd-delvel 설치
```
yum install httpd-devel
```
기본적인 Index.html파일을 만들어 준뒤 Apache서비스를 시작합니다.  
```
 vi /var/www/html/index.html
```
```
<html>  
 <head>  
 <title> h1 </title>  
 <body> h1 </body>
 </head>  
</html>
```
```
service httpd start
```
ELB 생성 (Application Load Balancer)<br>
+ 로드 밸런서 구성
  + 로드 밸런서 이름 설정
  + 체계 선택 (인터넷 연결)
  + 리스너 지정 (프로토콜 : HTTP, 포트 : 80)
  + 가용 영역 지정 (Public subnet)<br><br>
+ 보안 그룹 구성<br>
  + 새 보안 그룹 생성 (프로토콜 : HTTP, 포트 : 80, 소스 : 0,0,0,0)<br><br>
+ 라우팅 구성<br>
  + 대상 그룹 이름 생성<br><br>
+ 대상 등록<br>
  + 인스턴스 항목에서 WEB 서버 선택 후 등록 항목에 추가
  
ELB 생성이 완료 되었다면, 생성된 ELB의 DNS 주소로 웹페이지가 접속 되는지 확인합니다.

---

<h2>2. WAS 서버</h2>

- Amazon Linux 2 OS로 구성하였습니다.
- Apache 설치 및 테스트가 완료 되었다면, Tomcat을 설치합니다.<br>

JAVA 설치
```
yum -y install java-1.8.0-openjdk
```

Tomcat 설치
```
yum -y install tomcat
yum -y install tomcat-admin-webapps
yum -y install tomcat-webapps
yum -y install tomcat-docs-webapp
```

Tomcat 서비스 시작
```
service tomcat start
```
ELB 생성 (Network Load Balancer)<br>
+ 로드 밸런서 구성
  + 로드 밸런서 이름 설정
  + 체계 선택 (내부)
  + 리스너 지정 (프로토콜 : TCP, 포트 : 8009)
  + 가용 영역 지정 (Private subnet)<br><br>
+ 보안 그룹 구성
  + 새 보안 그룹 생성 (프로토콜 : TCP, 포트 : 8009, 소스 : WEB서버 Subnet IP)<br><br>
+ 라우팅 구성
  + 대상 그룹 이름 생성<br><br>
+ 대상 등록
  + 인스턴스 항목에서 WAS 서버 선택 후 등록 항목에 추가

---






 

